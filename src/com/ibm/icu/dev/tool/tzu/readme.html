<h2>Introduction</h2>

<p>ICU4J Time Zone Update Utility is a utility that supplies ICU4J jar files with the latest time zone information.</p>
<p>The time zone data is stored in zoneinfo.res files which are generated by the ICU team using the Olson Time Zone Database (<a href="http://www.twinsun.com/tz/tz-link.htm">http://www.twinsun.com/tz/tz-link.htm</a>). Every version of the time zone data corresponds directly to a version of the Olson database. For example "2006a" refers to the first refresh of the Olson database in 2006.</p>
<p>ICUTZU works by searching the file system for ICU4J jar files containing old time zone data, checking online for the newest time zone data and updates the ICU4J jar files accordingly. The user can choose to use a copy of the time zone data that comes bundled with ICUTZU or an online copy off of the ICU servers.</p>

<h2>Installation</h2>

<p>Unpack the archive into a directory of your choosing. For Unix-based systems, you will need to set permissions on runicutzu.sh:</p>
<p><code>chmod 755 runicutzu.sh</code></p>

<h2>Running ICUTZU</h2>

<h3>GUI</h3>
<ol>
    <li>Double-click <b>icutzu.jar</b> to start ICUTZU.</li>
    <li>
        Specify which paths to search and which paths to exclude from the search. By default, all drives are included in the search.
        <ul>
            <li>To include a path in the search, select <b>Include</b> from the drop-down menu, and either type the path in the text field and press enter, or simply browse for the path.</li>
            <li>To exclude a path from the search, do the same as above, but select <b>Exclude</b> from the drop-down menu.</li>
            <li>To specify whether to search subdirectories, check or uncheck the "Search Subdirectories" option.</li>
            <li>For additional options, right-click the directory list for a context-menu.</li>
        </ul>
    </li>
    <li>
        Click <b>Search</b> to begin searching for updatable ICU4J jar files in the directories specified. A new window will pop up during the search with a list of updatable ICU4J jar files found.
    </li>
    <li>
        Select which ICU4J jar files you wish to update.
        <ul><li><b>ICU Version</b> refers to the version of the ICU4J jar file itself, and <b>TZ Version</b> refers to version of the time zone data within the jar file.</li></ul>
    </li>
    <li>Choose the version of time zone data to update with from the drop down list.</li>
    <li>Click <b>Update</b> to begin updating the selected ICU4J jar files.</li>
</ol>

<h3>Command-line</h3>
<ol>
    <li>
        Edit the <b>DirectorySearch.txt</b> file and specify which paths ICUTZU will include and exclude in its search. ICUTZU searches directories recursively.
        <ul>
            <li><i>all</i> means include all file system roots in the search (for Windows this will include all drives, for Unix-based systems this will include the root directory).</li>
            <li><i>+path</i> means to include <i>path</i> in the search.</li>
            <li><i>-path</i> means to exclude <i>path</i> in the search.</li>
        </ul>
    </li>
    <li>
        Edit the <b>runicutzuenv.X</b> file, where X depends on your system (<b>.sh</b> for Unix-based systems, <b>.bat</b> for Windows, <b>.cmd</b> for Windows NT):
        <ul><table>
            <tr><td valign=top><li><b>JAVA_HOME</b>:</td><td>Set this to the path where java is installed on your machine (ie. C:\Program Files\Java\jdk1.5.0 for Windows or /usr/jdk1.5.0 for Unix).</li></td></tr>
            <tr><td valign=top><li><b>NOGUI</b>:</td><td>Set this to <b>true</b> to run in command-line mode.</li></td></tr>
            <tr><td valign=top><li><b>DISCOVERONLY</b>:</td><td>Set this to <b>true</b> the first time ICUTZU is run. When true, ICUTZU will build a list of updatable ICU4J jar files and save it to ICUList.txt. When false, ICUTZU will procede to update the files listed in ICUList.txt.</li></td></tr>
            <tr><td valign=top><li><b>SILENTPATCH</b>:</td><td>Set this to <b>false</b> for normal running, or true to give no output except in the case of an error. This option does not effect the content of the log file.</li></td></tr>
            <tr><td valign=top><li><b>OFFLINE</b>:</td><td>Set this to <b>false</b> for normal running, or true to keep ICUTZU from checking online for the latest time zone data and to use the local copy bundled with ICUTZU instead.</li></td></tr>
        </table></ul>
    </li>
    <li>Run <b>runicutzu.X</b> where X depends on your system (as above). This will build a list of updatable ICU4J files and save it to ICUList.txt.</li>
    <li>Edit the <b>runicutzuenv.X</b> file again, and set DISCOVERONLY to <b>false</b>..</li>
    <li>Run <b>runicutzu.X</b> again. This will update the files listed in ICUList.txt.</li>
</ol>

<h2>Restoring Changes</h2>

<p>
    When updating an icu4j jar file, the original file is copied to a backup location which is reported during runtime in the console output (which can also be found in the log file).
    <ul>
        <li>The backup location is of the form <i>[icutzu home]<b>/Temp/</b>[prefix]<b>/</b>[prefix][unique id]<b>.jar</b></i>, where <i>[prefix]</i> is the filename of the original icu4j jar file without the .jar at the end.</li>
        <li>The txt file in the same directory that shares the same unique id specifies the original location.</li>
    </ul>
</p>
